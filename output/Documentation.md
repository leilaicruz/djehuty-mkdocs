



`djehuty`
=========


The 4TU.ResearchData repository system
--------------------------------------


 version 24\.10\.1, November 4, 2024   







This document is also available as [PDF](djehuty.pdf).




Contents
--------



1 [Introduction](#x1-30001)
  
 1\.1 [Obtaining the source code](#x1-40001.1)
  
 1\.2 [Installing the prerequisites](#x1-50001.2)
  
  1\.2\.1 [Installation on Enterprise Linux 7\+](#x1-60001.2.1)
  
 1\.3 [Installation instructions](#x1-70001.3)
  
 1\.4 [Pre\-built containers](#x1-80001.4)
  
2 [Configuring djehuty](#x1-90002)
  
 2\.1 [Essential options](#x1-100002.1)
  
 2\.2 [Configuring the Database](#x1-110002.2)
  
 2\.3 [Audit trails and database reconstruction](#x1-120002.3)
  
  2\.3\.1 [Reconstructing the database from the query audit log](#x1-130002.3.1)
  
 2\.4 [Configuring storage](#x1-140002.4)
  
 2\.5 [Configuring an identity provider](#x1-150002.5)
  
  2\.5\.1 [SAML2\.0](#x1-160002.5.1)
  
  2\.5\.2 [ORCID](#x1-200002.5.2)
  
 2\.6 [Configuring an e\-mail server](#x1-210002.6)
  
 2\.7 [Configuring DOI registration](#x1-220002.7)
  
 2\.8 [Configuring Handle registration](#x1-230002.8)
  
 2\.9 [Configuring IIIF support](#x1-240002.9)
  
 2\.10 [Customizing looks](#x1-250002.10)
  
  2\.10\.1 [Customizing colors](#x1-260002.10.1)
  
 2\.11 [Configuring privileged users](#x1-270002.11)
  
3 [Knowledge graph](#x1-280003)
  
 3\.1 [Use of vocabularies](#x1-290003.1)
  
 3\.2 [Notational shortcuts](#x1-300003.2)
  
  3\.2\.1 [Notation for typed triples](#x1-310003.2.1)
  
  3\.2\.2 [Notation for rdf:List](#x1-320003.2.2)
  
 3\.3 [Datasets](#x1-330003.3)
  
 3\.4 [Accounts](#x1-340003.4)
  
 3\.5 [Funding](#x1-350003.5)
  
4 [Contributing](#x1-360004)
  
 4\.1 [Setting up a development environment](#x1-370004.1)
  
 4\.2 [Configuring djehuty](#x1-380004.2)
  
  4\.2\.1 [Modifications to the example configuration for developers](#x1-390004.2.1)
  
  4\.2\.2 [Invoking djehuty](#x1-420004.2.2)
  
 4\.3 [Navigating the source code](#x1-430004.3)
  
  4\.3\.1 [Starting point](#x1-440004.3.1)
  
  4\.3\.2 [How djehuty initializes](#x1-450004.3.2)
  
  4\.3\.3 [Translating URI paths to internal procedures](#x1-460004.3.3)
  
  4\.3\.4 [Diving into the code that displays the homepage](#x1-470004.3.4)
  
  4\.3\.5 [Database communication](#x1-480004.3.5)
  
5 [Application Programming Interface](#x1-490005)
  
 5\.1 [The /v2 public interface](#x1-500005.1)
  
  5\.1\.1 [/v2/articles (HTTP GET)](#x1-510005.1.1)
  
  5\.1\.2 [/v2/articles/search (HTTP POST)](#x1-520005.1.2)
  
  5\.1\.3 [/v2/articles/\<dataset\-id\> (HTTP GET)](#x1-530005.1.3)
  
  5\.1\.4 [/v2/articles/\<dataset\-id\>/versions (HTTP GET)](#x1-540005.1.4)
  
  5\.1\.5 [/v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)](#x1-550005.1.5)
  
  5\.1\.6 [/v2/articles/\<dataset\-id\>/versions/\<version\>/embargo
(HTTP GET)](#x1-560005.1.6)
  
  5\.1\.7 [/v2/articles/\<dataset\-id\>/files (HTTP GET)](#x1-570005.1.7)
  
  5\.1\.8 [/v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)](#x1-580005.1.8)
  
  5\.1\.9 [/v2/collections (HTTP GET)](#x1-590005.1.9)
  
  5\.1\.10 [/v2/collections/search (HTTP POST)](#x1-600005.1.10)
  
  5\.1\.11 [/v2/collections/\<collection\-id\> (HTTP GET)](#x1-610005.1.11)
  
  5\.1\.12 [/v2/collections/\<collection\-id\>/versions (HTTP GET)](#x1-620005.1.12)
  
  5\.1\.13 [/v2/collections/\<collection\-id\>/versions/\<version\>
(HTTP GET)](#x1-630005.1.13)
  
  5\.1\.14 [/v2/categories (HTTP GET)](#x1-640005.1.14)
  
  5\.1\.15 [/v2/licenses (HTTP GET)](#x1-650005.1.15)
  
 5\.2 [The /v2 private interface](#x1-660005.2)
  
  5\.2\.1 [/v2/account/articles (HTTP GET)](#x1-670005.2.1)
  
  5\.2\.2 [/v2/account/articles (HTTP POST)](#x1-680005.2.2)








List of Figures
---------------


1\.1 [Run\-time references when constructed with the packages from GNU
Guix.](#x1-5001r1)  
3\.1 [Shorthand notation for triples with an rdf:type which features
a hollow predicate arrow and a colored type specifier with rounded
corners.](#x1-31001r1)  
3\.2 [Shorthand notation for triples with a literal, which features a
hollow predicate arrow and a colored rectangular type specifier.](#x1-31002r2)  
3\.3 [Shorthand
notation for rdf:List with numeric indexes, which features a hollow
double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.](#x1-32001r3)  
3\.4 [The RDF pattern for a djht:Dataset. For a full overview
of djht:Dataset properties, use the exploratory from the administration
panel.](#x1-33001r4)  
3\.5 [The RDF pattern for a djht:DatasetContainer. All versions of a
dataset share a djht:dataset\_id and a UUID in the container URI.](#x1-33002r5)  
3\.6 [The
RDF pattern for an djht:Account.](#x1-34001r6)  
3\.7 [The RDF pattern for a djht:Funding.](#x1-35001r7)  









Chapter 1Introduction
---------------------


djehuty is the data repository system developed by and for 4TU.ResearchData. The name finds its
inspiration in [Thoth](https://en.wikipedia.org/wiki/Thoth), the Egyptian entity that introduced the idea of writing.
### 1\.1  Obtaining the source code


The source code can be downloaded at the
[Releases](https://github.com/4TUResearchData/djehuty/releases)[1](djehuty2.html#fn1x1) 
page. Make sure to download the djehuty\-24\.10\.1\.tar.gz file.
Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.









































Chapter 2Configuring djehuty
----------------------------


Now that djehuty is installed, it’s a good moment to look into its run\-time configuration options. All
configuration can be done through a configuration file, for which an example is available at
‘etc/djehuty/djehuty\-example\-config.xml’.
### 2\.1  Essential options


 

| Option | Description |
| bind\-address | The address to bind a TCP socket on. |
| port | The port to bind a TCK socket on. |
| base\-url | The URL on which the instance will be available to the outside  world. |
| allow\-crawlers | Set to 1 to allow crawlers in the robots.txt, otherwise set to  0\. |
| production | Performs extra checks before starting. Enable this when  running a production instance. |
| live\-reload | When set to 1, it reloads Python code on\-the\-fly. We  recommend to set it to 0 when running in production. |
| debug\-mode | When set to 1, it will display backtraces and error messages in  the web browser. When set to 0, it will only show backtraces  and error messages in the web browser. |
| use\-x\-forwarded\-for | When running djehuty behind a reverse\-proxy server, use the  HTTP header X\-Forwarded\-For to log IP address information. |
| disable\-collaboration | When set to 1, it disables the “collaborators” feature. |
| restrict\-depositing\-to\-domain | By default, any authenticated user may deposit data. This  option limits the ability to deposit to users with an e\-mail  address of a specific domain name. |
| cache\-root | djehuty can cache query responses to lower the load on the  database server. Specify the directory where to store cache files.  This element takes an attribute clear\-on\-start, and when  set to 1, it will remove all cache files on start\-up of djehuty. |
| profile\-images\-root | Users can upload a profile image in djehuty. This option  should point to a filesystem directory where these profile  images can be stored. |
| disable\-2fa | Accounts with privileges receive a code by e\-mail as a second  factor when logging in. Setting this option to 1 disables the  second factor authentication. |
| sandbox\-message | Display a message on the top of every page. |
| notice\-message | Display a message on the main page. |
| maintenance\-mode | When set to 1, all HTTP requests result in the displayment of  a maintenance message. Use this option while backing up the  database, or when performing major updates. |
|  |

 

### 2\.2  Configuring the Database


The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










































































































Chapter 3Knowledge graph
------------------------


djehuty processes its information using the Resource Description Framework ([Lassila](#Xlassila-99-rdf), [1999](#Xlassila-99-rdf)). This chapter
describes the parts that make up the data model of djehuty.
### 3\.1  Use of vocabularies


Throughout this chapter, abbreviated references to ontologies are used. Table [3\.1](#x1-29001r1) lists these
abbreviations.



---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---





### 3\.2  Notational shortcuts


In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---



















































Chapter 4Contributing
---------------------


This chapter outlines how to set up an instance of djehuty with the goal of modifying its source code. Or
in other words: this is the developer setup.
### 4\.1  Setting up a development environment


First, we need to obtain the latest version of the source code: 

```
$ git clone https://github.com/4TUResearchData/djehuty.git
```

Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





































































































Chapter 5Application Programming Interface
------------------------------------------


The application programming interface (API) provided by djehuty allows for automating tasks otherwise
done through the user interface. In addition to automation, the API can also be used to gather additional
information, like statistics on Git repositories.
Throughout this chapter we provide examples for using the API using curl and jq. Another way of seeing
the API in action is to use the developer tools in a web browser while performing the desired action using
the web user interface.
### 5\.1  The /v2 public interface


The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 






































































































































References
----------




   Lassila, O. (1999, February). Resource description framework (RDF) model and syntax
 specification \[W3C Recommendation]. (http://www.w3\.org/TR/1999/REC\-rdf\-syntax\-19990222/)
 



   SPARQL 1\.1 overview \[W3C Recommendation]. (2013, March).
 (http://www.w3\.org/TR/2013/REC\-sparql11\-overview\-20130321/)
















`djehuty`
=========


The 4TU.ResearchData repository system
--------------------------------------


 version 24\.10\.1, November 4, 2024   








`djehuty`
=========


The 4TU.ResearchData repository system
--------------------------------------


 version 24\.10\.1, November 4, 2024   





`djehuty`
=========



`djehuty`

The 4TU.ResearchData repository system
--------------------------------------




This document is also available as [PDF](djehuty.pdf).




Contents
--------



1 [Introduction](#x1-30001)
  
 1\.1 [Obtaining the source code](#x1-40001.1)
  
 1\.2 [Installing the prerequisites](#x1-50001.2)
  
  1\.2\.1 [Installation on Enterprise Linux 7\+](#x1-60001.2.1)
  
 1\.3 [Installation instructions](#x1-70001.3)
  
 1\.4 [Pre\-built containers](#x1-80001.4)
  
2 [Configuring djehuty](#x1-90002)
  
 2\.1 [Essential options](#x1-100002.1)
  
 2\.2 [Configuring the Database](#x1-110002.2)
  
 2\.3 [Audit trails and database reconstruction](#x1-120002.3)
  
  2\.3\.1 [Reconstructing the database from the query audit log](#x1-130002.3.1)
  
 2\.4 [Configuring storage](#x1-140002.4)
  
 2\.5 [Configuring an identity provider](#x1-150002.5)
  
  2\.5\.1 [SAML2\.0](#x1-160002.5.1)
  
  2\.5\.2 [ORCID](#x1-200002.5.2)
  
 2\.6 [Configuring an e\-mail server](#x1-210002.6)
  
 2\.7 [Configuring DOI registration](#x1-220002.7)
  
 2\.8 [Configuring Handle registration](#x1-230002.8)
  
 2\.9 [Configuring IIIF support](#x1-240002.9)
  
 2\.10 [Customizing looks](#x1-250002.10)
  
  2\.10\.1 [Customizing colors](#x1-260002.10.1)
  
 2\.11 [Configuring privileged users](#x1-270002.11)
  
3 [Knowledge graph](#x1-280003)
  
 3\.1 [Use of vocabularies](#x1-290003.1)
  
 3\.2 [Notational shortcuts](#x1-300003.2)
  
  3\.2\.1 [Notation for typed triples](#x1-310003.2.1)
  
  3\.2\.2 [Notation for rdf:List](#x1-320003.2.2)
  
 3\.3 [Datasets](#x1-330003.3)
  
 3\.4 [Accounts](#x1-340003.4)
  
 3\.5 [Funding](#x1-350003.5)
  
4 [Contributing](#x1-360004)
  
 4\.1 [Setting up a development environment](#x1-370004.1)
  
 4\.2 [Configuring djehuty](#x1-380004.2)
  
  4\.2\.1 [Modifications to the example configuration for developers](#x1-390004.2.1)
  
  4\.2\.2 [Invoking djehuty](#x1-420004.2.2)
  
 4\.3 [Navigating the source code](#x1-430004.3)
  
  4\.3\.1 [Starting point](#x1-440004.3.1)
  
  4\.3\.2 [How djehuty initializes](#x1-450004.3.2)
  
  4\.3\.3 [Translating URI paths to internal procedures](#x1-460004.3.3)
  
  4\.3\.4 [Diving into the code that displays the homepage](#x1-470004.3.4)
  
  4\.3\.5 [Database communication](#x1-480004.3.5)
  
5 [Application Programming Interface](#x1-490005)
  
 5\.1 [The /v2 public interface](#x1-500005.1)
  
  5\.1\.1 [/v2/articles (HTTP GET)](#x1-510005.1.1)
  
  5\.1\.2 [/v2/articles/search (HTTP POST)](#x1-520005.1.2)
  
  5\.1\.3 [/v2/articles/\<dataset\-id\> (HTTP GET)](#x1-530005.1.3)
  
  5\.1\.4 [/v2/articles/\<dataset\-id\>/versions (HTTP GET)](#x1-540005.1.4)
  
  5\.1\.5 [/v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)](#x1-550005.1.5)
  
  5\.1\.6 [/v2/articles/\<dataset\-id\>/versions/\<version\>/embargo
(HTTP GET)](#x1-560005.1.6)
  
  5\.1\.7 [/v2/articles/\<dataset\-id\>/files (HTTP GET)](#x1-570005.1.7)
  
  5\.1\.8 [/v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)](#x1-580005.1.8)
  
  5\.1\.9 [/v2/collections (HTTP GET)](#x1-590005.1.9)
  
  5\.1\.10 [/v2/collections/search (HTTP POST)](#x1-600005.1.10)
  
  5\.1\.11 [/v2/collections/\<collection\-id\> (HTTP GET)](#x1-610005.1.11)
  
  5\.1\.12 [/v2/collections/\<collection\-id\>/versions (HTTP GET)](#x1-620005.1.12)
  
  5\.1\.13 [/v2/collections/\<collection\-id\>/versions/\<version\>
(HTTP GET)](#x1-630005.1.13)
  
  5\.1\.14 [/v2/categories (HTTP GET)](#x1-640005.1.14)
  
  5\.1\.15 [/v2/licenses (HTTP GET)](#x1-650005.1.15)
  
 5\.2 [The /v2 private interface](#x1-660005.2)
  
  5\.2\.1 [/v2/account/articles (HTTP GET)](#x1-670005.2.1)
  
  5\.2\.2 [/v2/account/articles (HTTP POST)](#x1-680005.2.2)








List of Figures
---------------


1\.1 [Run\-time references when constructed with the packages from GNU
Guix.](#x1-5001r1)  
3\.1 [Shorthand notation for triples with an rdf:type which features
a hollow predicate arrow and a colored type specifier with rounded
corners.](#x1-31001r1)  
3\.2 [Shorthand notation for triples with a literal, which features a
hollow predicate arrow and a colored rectangular type specifier.](#x1-31002r2)  
3\.3 [Shorthand
notation for rdf:List with numeric indexes, which features a hollow
double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.](#x1-32001r3)  
3\.4 [The RDF pattern for a djht:Dataset. For a full overview
of djht:Dataset properties, use the exploratory from the administration
panel.](#x1-33001r4)  
3\.5 [The RDF pattern for a djht:DatasetContainer. All versions of a
dataset share a djht:dataset\_id and a UUID in the container URI.](#x1-33002r5)  
3\.6 [The
RDF pattern for an djht:Account.](#x1-34001r6)  
3\.7 [The RDF pattern for a djht:Funding.](#x1-35001r7)  









Chapter 1Introduction
---------------------


djehuty is the data repository system developed by and for 4TU.ResearchData. The name finds its
inspiration in [Thoth](https://en.wikipedia.org/wiki/Thoth), the Egyptian entity that introduced the idea of writing.
### 1\.1  Obtaining the source code


The source code can be downloaded at the
[Releases](https://github.com/4TUResearchData/djehuty/releases)[1](djehuty2.html#fn1x1) 
page. Make sure to download the djehuty\-24\.10\.1\.tar.gz file.
Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.









































Chapter 2Configuring djehuty
----------------------------


Now that djehuty is installed, it’s a good moment to look into its run\-time configuration options. All
configuration can be done through a configuration file, for which an example is available at
‘etc/djehuty/djehuty\-example\-config.xml’.
### 2\.1  Essential options


 

| Option | Description |
| bind\-address | The address to bind a TCP socket on. |
| port | The port to bind a TCK socket on. |
| base\-url | The URL on which the instance will be available to the outside  world. |
| allow\-crawlers | Set to 1 to allow crawlers in the robots.txt, otherwise set to  0\. |
| production | Performs extra checks before starting. Enable this when  running a production instance. |
| live\-reload | When set to 1, it reloads Python code on\-the\-fly. We  recommend to set it to 0 when running in production. |
| debug\-mode | When set to 1, it will display backtraces and error messages in  the web browser. When set to 0, it will only show backtraces  and error messages in the web browser. |
| use\-x\-forwarded\-for | When running djehuty behind a reverse\-proxy server, use the  HTTP header X\-Forwarded\-For to log IP address information. |
| disable\-collaboration | When set to 1, it disables the “collaborators” feature. |
| restrict\-depositing\-to\-domain | By default, any authenticated user may deposit data. This  option limits the ability to deposit to users with an e\-mail  address of a specific domain name. |
| cache\-root | djehuty can cache query responses to lower the load on the  database server. Specify the directory where to store cache files.  This element takes an attribute clear\-on\-start, and when  set to 1, it will remove all cache files on start\-up of djehuty. |
| profile\-images\-root | Users can upload a profile image in djehuty. This option  should point to a filesystem directory where these profile  images can be stored. |
| disable\-2fa | Accounts with privileges receive a code by e\-mail as a second  factor when logging in. Setting this option to 1 disables the  second factor authentication. |
| sandbox\-message | Display a message on the top of every page. |
| notice\-message | Display a message on the main page. |
| maintenance\-mode | When set to 1, all HTTP requests result in the displayment of  a maintenance message. Use this option while backing up the  database, or when performing major updates. |
|  |

 

### 2\.2  Configuring the Database


The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










































































































Chapter 3Knowledge graph
------------------------


djehuty processes its information using the Resource Description Framework ([Lassila](#Xlassila-99-rdf), [1999](#Xlassila-99-rdf)). This chapter
describes the parts that make up the data model of djehuty.
### 3\.1  Use of vocabularies


Throughout this chapter, abbreviated references to ontologies are used. Table [3\.1](#x1-29001r1) lists these
abbreviations.



---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---





### 3\.2  Notational shortcuts


In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---



















































Chapter 4Contributing
---------------------


This chapter outlines how to set up an instance of djehuty with the goal of modifying its source code. Or
in other words: this is the developer setup.
### 4\.1  Setting up a development environment


First, we need to obtain the latest version of the source code: 

```
$ git clone https://github.com/4TUResearchData/djehuty.git
```

Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





































































































Chapter 5Application Programming Interface
------------------------------------------


The application programming interface (API) provided by djehuty allows for automating tasks otherwise
done through the user interface. In addition to automation, the API can also be used to gather additional
information, like statistics on Git repositories.
Throughout this chapter we provide examples for using the API using curl and jq. Another way of seeing
the API in action is to use the developer tools in a web browser while performing the desired action using
the web user interface.
### 5\.1  The /v2 public interface


The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 






































































































































References
----------




   Lassila, O. (1999, February). Resource description framework (RDF) model and syntax
 specification \[W3C Recommendation]. (http://www.w3\.org/TR/1999/REC\-rdf\-syntax\-19990222/)
 



   SPARQL 1\.1 overview \[W3C Recommendation]. (2013, March).
 (http://www.w3\.org/TR/2013/REC\-sparql11\-overview\-20130321/)












This document is also available as [PDF](djehuty.pdf).




Contents
--------



1 [Introduction](#x1-30001)
  
 1\.1 [Obtaining the source code](#x1-40001.1)
  
 1\.2 [Installing the prerequisites](#x1-50001.2)
  
  1\.2\.1 [Installation on Enterprise Linux 7\+](#x1-60001.2.1)
  
 1\.3 [Installation instructions](#x1-70001.3)
  
 1\.4 [Pre\-built containers](#x1-80001.4)
  
2 [Configuring djehuty](#x1-90002)
  
 2\.1 [Essential options](#x1-100002.1)
  
 2\.2 [Configuring the Database](#x1-110002.2)
  
 2\.3 [Audit trails and database reconstruction](#x1-120002.3)
  
  2\.3\.1 [Reconstructing the database from the query audit log](#x1-130002.3.1)
  
 2\.4 [Configuring storage](#x1-140002.4)
  
 2\.5 [Configuring an identity provider](#x1-150002.5)
  
  2\.5\.1 [SAML2\.0](#x1-160002.5.1)
  
  2\.5\.2 [ORCID](#x1-200002.5.2)
  
 2\.6 [Configuring an e\-mail server](#x1-210002.6)
  
 2\.7 [Configuring DOI registration](#x1-220002.7)
  
 2\.8 [Configuring Handle registration](#x1-230002.8)
  
 2\.9 [Configuring IIIF support](#x1-240002.9)
  
 2\.10 [Customizing looks](#x1-250002.10)
  
  2\.10\.1 [Customizing colors](#x1-260002.10.1)
  
 2\.11 [Configuring privileged users](#x1-270002.11)
  
3 [Knowledge graph](#x1-280003)
  
 3\.1 [Use of vocabularies](#x1-290003.1)
  
 3\.2 [Notational shortcuts](#x1-300003.2)
  
  3\.2\.1 [Notation for typed triples](#x1-310003.2.1)
  
  3\.2\.2 [Notation for rdf:List](#x1-320003.2.2)
  
 3\.3 [Datasets](#x1-330003.3)
  
 3\.4 [Accounts](#x1-340003.4)
  
 3\.5 [Funding](#x1-350003.5)
  
4 [Contributing](#x1-360004)
  
 4\.1 [Setting up a development environment](#x1-370004.1)
  
 4\.2 [Configuring djehuty](#x1-380004.2)
  
  4\.2\.1 [Modifications to the example configuration for developers](#x1-390004.2.1)
  
  4\.2\.2 [Invoking djehuty](#x1-420004.2.2)
  
 4\.3 [Navigating the source code](#x1-430004.3)
  
  4\.3\.1 [Starting point](#x1-440004.3.1)
  
  4\.3\.2 [How djehuty initializes](#x1-450004.3.2)
  
  4\.3\.3 [Translating URI paths to internal procedures](#x1-460004.3.3)
  
  4\.3\.4 [Diving into the code that displays the homepage](#x1-470004.3.4)
  
  4\.3\.5 [Database communication](#x1-480004.3.5)
  
5 [Application Programming Interface](#x1-490005)
  
 5\.1 [The /v2 public interface](#x1-500005.1)
  
  5\.1\.1 [/v2/articles (HTTP GET)](#x1-510005.1.1)
  
  5\.1\.2 [/v2/articles/search (HTTP POST)](#x1-520005.1.2)
  
  5\.1\.3 [/v2/articles/\<dataset\-id\> (HTTP GET)](#x1-530005.1.3)
  
  5\.1\.4 [/v2/articles/\<dataset\-id\>/versions (HTTP GET)](#x1-540005.1.4)
  
  5\.1\.5 [/v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)](#x1-550005.1.5)
  
  5\.1\.6 [/v2/articles/\<dataset\-id\>/versions/\<version\>/embargo
(HTTP GET)](#x1-560005.1.6)
  
  5\.1\.7 [/v2/articles/\<dataset\-id\>/files (HTTP GET)](#x1-570005.1.7)
  
  5\.1\.8 [/v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)](#x1-580005.1.8)
  
  5\.1\.9 [/v2/collections (HTTP GET)](#x1-590005.1.9)
  
  5\.1\.10 [/v2/collections/search (HTTP POST)](#x1-600005.1.10)
  
  5\.1\.11 [/v2/collections/\<collection\-id\> (HTTP GET)](#x1-610005.1.11)
  
  5\.1\.12 [/v2/collections/\<collection\-id\>/versions (HTTP GET)](#x1-620005.1.12)
  
  5\.1\.13 [/v2/collections/\<collection\-id\>/versions/\<version\>
(HTTP GET)](#x1-630005.1.13)
  
  5\.1\.14 [/v2/categories (HTTP GET)](#x1-640005.1.14)
  
  5\.1\.15 [/v2/licenses (HTTP GET)](#x1-650005.1.15)
  
 5\.2 [The /v2 private interface](#x1-660005.2)
  
  5\.2\.1 [/v2/account/articles (HTTP GET)](#x1-670005.2.1)
  
  5\.2\.2 [/v2/account/articles (HTTP POST)](#x1-680005.2.2)








Contents
--------









List of Figures
---------------


1\.1 [Run\-time references when constructed with the packages from GNU
Guix.](#x1-5001r1)  
3\.1 [Shorthand notation for triples with an rdf:type which features
a hollow predicate arrow and a colored type specifier with rounded
corners.](#x1-31001r1)  
3\.2 [Shorthand notation for triples with a literal, which features a
hollow predicate arrow and a colored rectangular type specifier.](#x1-31002r2)  
3\.3 [Shorthand
notation for rdf:List with numeric indexes, which features a hollow
double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.](#x1-32001r3)  
3\.4 [The RDF pattern for a djht:Dataset. For a full overview
of djht:Dataset properties, use the exploratory from the administration
panel.](#x1-33001r4)  
3\.5 [The RDF pattern for a djht:DatasetContainer. All versions of a
dataset share a djht:dataset\_id and a UUID in the container URI.](#x1-33002r5)  
3\.6 [The
RDF pattern for an djht:Account.](#x1-34001r6)  
3\.7 [The RDF pattern for a djht:Funding.](#x1-35001r7)  









List of Figures
---------------









Chapter 1Introduction
---------------------


djehuty is the data repository system developed by and for 4TU.ResearchData. The name finds its
inspiration in [Thoth](https://en.wikipedia.org/wiki/Thoth), the Egyptian entity that introduced the idea of writing.
### 1\.1  Obtaining the source code


The source code can be downloaded at the
[Releases](https://github.com/4TUResearchData/djehuty/releases)[1](djehuty2.html#fn1x1) 
page. Make sure to download the djehuty\-24\.10\.1\.tar.gz file.
Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.









































Chapter 1Introduction
---------------------



djehuty is the data repository system developed by and for 4TU.ResearchData. The name finds its
inspiration in [Thoth](https://en.wikipedia.org/wiki/Thoth), the Egyptian entity that introduced the idea of writing.
### 1\.1  Obtaining the source code


The source code can be downloaded at the
[Releases](https://github.com/4TUResearchData/djehuty/releases)[1](djehuty2.html#fn1x1) 
page. Make sure to download the djehuty\-24\.10\.1\.tar.gz file.
Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.







































The source code can be downloaded at the
[Releases](https://github.com/4TUResearchData/djehuty/releases)[1](djehuty2.html#fn1x1) 
page. Make sure to download the djehuty\-24\.10\.1\.tar.gz file.
Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.





































Or, directly download the tarball using the command\-line:


```
curl -LO https://github.com/4TUResearchData/djehuty/releases/\  
download/v24.10.1/djehuty-24.10.1.tar.gz
```

After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.



































After obtaining the tarball, it can be unpacked using the tar command:


```
tar zxvf djehuty-24.10.1.tar.gz
```

### 1\.2  Installing the prerequisites


The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.

































The djehuty program needs Python (version 3\.8 or higher) and Git to be installed. Additionally, a couple
of Python packages need to be installed. The following sections describe installing the prerequisites on
various GNU/Linux distributions. To put the software in the context of its environment, figure [1\.1](#x1-5001r1) displays
the complete run\-time dependencies from djehuty to glibc.


---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.

































---




 ![PIC](figures/references-graph-.png)





  
    Figure 1\.1: Run\-time references when constructed with the packages from GNU Guix.   



---


The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.






























 ![PIC](figures/references-graph-.png)





 ![PIC](figures/references-graph-.png)





The web service of djehuty stores its information in a SPARQL 1\.1 ([“SPARQL 1\.1 Overview”](#Xsparql-11), [2013](#Xsparql-11)) endpoint. We recommend
either [Blazegraph](https://blazegraph.com/)[2](djehuty3.html#fn2x1) or [Virtuoso
open\-source edition](http://vos.openlinksw.com/owiki/wiki/VOS)[3](djehuty4.html#fn3x1) .
#### 1\.2\.1  Installation on Enterprise Linux 7\+


The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.



























The Python packages on Enterprise Linux version 7 or higher seem to be too far out of date. So installing
the prerequisites involves two steps.
The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.

























The first step involves installing system\-wide packages for Python and Git.


```
yum install python39 git
```

The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.























The second step involves using Python’s venv module to install the Python packages in a virtual
environment:


```
python3.9 -m venv djehuty-env 
. djehuty-env/bin/activate 
cd /path/to/the/repository/checkout/root 
pip install -r requirements.txt
```


### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.






















### 1\.3  Installation instructions


After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.



















After obtaining the source code (see section [1\.1](#x1-40001.1) ‘[Obtaining the source code](#x1-40001.1)’) and installing the
required tools (see section [1\.2](#x1-50001.2) ‘[Installing the prerequisites](#x1-50001.2)’), building involves running the following
commands:


```
cd djehuty-24.10.1 
autoreconf -vif # Only needed if the "./configure" step does not work. 
./configure 
make 
make install
```

To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.

















To run the make install command, super user privileges may be required. Specify a \-\-prefix to the
configure script to install the tools to a user\-writeable location to avoid needing super user
privileges.
After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.















After installation, the djehuty program will be available.

### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.














### 1\.4  Pre\-built containers


4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.











4TU.ResearchData provides Docker container images as a convenience service for each monthly djehuty release.
The following table outlines the meaning of each image provided. The images are published to [Docker
Hub](https://hub.docker.com/r/4turesearchdata/djehuty)[4](djehuty5.html#fn4x1) .
 

| Image tag | Description |
| devel | Image meant for development purposes. Before it executes the djehuty  command it checks out the latest codebase. So re\-running the same  container image may result in running a different version of djehuty. |
| latest | This image points to the latest djehuty release. It does not automatically  update the djehuty codebase. |
| XX.X | 4TU.ResearchData releases a version each month where the number before  the dot refers to the year and the number after the dot refers to the month.  Use a specific version image when you want to upgrade at your own pace. |
|  |

 
To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.









Image tag 



Description 



devel 



Image meant for development purposes. Before it executes the djehuty
 command it checks out the latest codebase. So re\-running the same
 container image may result in running a different version of djehuty. 



latest 



This image points to the latest djehuty release. It does not automatically
 update the djehuty codebase. 



XX.X 



4TU.ResearchData releases a version each month where the number before
 the dot refers to the year and the number after the dot refers to the month.
 Use a specific version image when you want to upgrade at your own pace. 



To build the container images for yourself, see the build instructions in the ‘docker/Dockerfile’
file.













Chapter 2Configuring djehuty
----------------------------


Now that djehuty is installed, it’s a good moment to look into its run\-time configuration options. All
configuration can be done through a configuration file, for which an example is available at
‘etc/djehuty/djehuty\-example\-config.xml’.
### 2\.1  Essential options


 

| Option | Description |
| bind\-address | The address to bind a TCP socket on. |
| port | The port to bind a TCK socket on. |
| base\-url | The URL on which the instance will be available to the outside  world. |
| allow\-crawlers | Set to 1 to allow crawlers in the robots.txt, otherwise set to  0\. |
| production | Performs extra checks before starting. Enable this when  running a production instance. |
| live\-reload | When set to 1, it reloads Python code on\-the\-fly. We  recommend to set it to 0 when running in production. |
| debug\-mode | When set to 1, it will display backtraces and error messages in  the web browser. When set to 0, it will only show backtraces  and error messages in the web browser. |
| use\-x\-forwarded\-for | When running djehuty behind a reverse\-proxy server, use the  HTTP header X\-Forwarded\-For to log IP address information. |
| disable\-collaboration | When set to 1, it disables the “collaborators” feature. |
| restrict\-depositing\-to\-domain | By default, any authenticated user may deposit data. This  option limits the ability to deposit to users with an e\-mail  address of a specific domain name. |
| cache\-root | djehuty can cache query responses to lower the load on the  database server. Specify the directory where to store cache files.  This element takes an attribute clear\-on\-start, and when  set to 1, it will remove all cache files on start\-up of djehuty. |
| profile\-images\-root | Users can upload a profile image in djehuty. This option  should point to a filesystem directory where these profile  images can be stored. |
| disable\-2fa | Accounts with privileges receive a code by e\-mail as a second  factor when logging in. Setting this option to 1 disables the  second factor authentication. |
| sandbox\-message | Display a message on the top of every page. |
| notice\-message | Display a message on the main page. |
| maintenance\-mode | When set to 1, all HTTP requests result in the displayment of  a maintenance message. Use this option while backing up the  database, or when performing major updates. |
|  |

 

### 2\.2  Configuring the Database


The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










































































































Chapter 2Configuring djehuty
----------------------------



Now that djehuty is installed, it’s a good moment to look into its run\-time configuration options. All
configuration can be done through a configuration file, for which an example is available at
‘etc/djehuty/djehuty\-example\-config.xml’.
### 2\.1  Essential options


 

| Option | Description |
| bind\-address | The address to bind a TCP socket on. |
| port | The port to bind a TCK socket on. |
| base\-url | The URL on which the instance will be available to the outside  world. |
| allow\-crawlers | Set to 1 to allow crawlers in the robots.txt, otherwise set to  0\. |
| production | Performs extra checks before starting. Enable this when  running a production instance. |
| live\-reload | When set to 1, it reloads Python code on\-the\-fly. We  recommend to set it to 0 when running in production. |
| debug\-mode | When set to 1, it will display backtraces and error messages in  the web browser. When set to 0, it will only show backtraces  and error messages in the web browser. |
| use\-x\-forwarded\-for | When running djehuty behind a reverse\-proxy server, use the  HTTP header X\-Forwarded\-For to log IP address information. |
| disable\-collaboration | When set to 1, it disables the “collaborators” feature. |
| restrict\-depositing\-to\-domain | By default, any authenticated user may deposit data. This  option limits the ability to deposit to users with an e\-mail  address of a specific domain name. |
| cache\-root | djehuty can cache query responses to lower the load on the  database server. Specify the directory where to store cache files.  This element takes an attribute clear\-on\-start, and when  set to 1, it will remove all cache files on start\-up of djehuty. |
| profile\-images\-root | Users can upload a profile image in djehuty. This option  should point to a filesystem directory where these profile  images can be stored. |
| disable\-2fa | Accounts with privileges receive a code by e\-mail as a second  factor when logging in. Setting this option to 1 disables the  second factor authentication. |
| sandbox\-message | Display a message on the top of every page. |
| notice\-message | Display a message on the main page. |
| maintenance\-mode | When set to 1, all HTTP requests result in the displayment of  a maintenance message. Use this option while backing up the  database, or when performing major updates. |
|  |

 

### 2\.2  Configuring the Database


The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```








































































































Option 



Description 



bind\-address 



The address to bind a TCP socket on. 



port 



The port to bind a TCK socket on.



base\-url 



The URL on which the instance will be available to the outside
 world. 



allow\-crawlers 



Set to 1 to allow crawlers in the robots.txt, otherwise set to
 0\. 



production 



Performs extra checks before starting. Enable this when
 running a production instance. 



live\-reload 



When set to 1, it reloads Python code on\-the\-fly. We
 recommend to set it to 0 when running in production. 



debug\-mode 



When set to 1, it will display backtraces and error messages in
 the web browser. When set to 0, it will only show backtraces
 and error messages in the web browser. 



use\-x\-forwarded\-for 



When running djehuty behind a reverse\-proxy server, use the
 HTTP header X\-Forwarded\-For to log IP address information. 



disable\-collaboration 



When set to 1, it disables the “collaborators” feature. 



restrict\-depositing\-to\-domain 



By default, any authenticated user may deposit data. This
 option limits the ability to deposit to users with an e\-mail
 address of a specific domain name. 



cache\-root 



djehuty can cache query responses to lower the load on the
 database server. Specify the directory where to store cache files.
 This element takes an attribute clear\-on\-start, and when
 set to 1, it will remove all cache files on start\-up of djehuty. 



profile\-images\-root 



Users can upload a profile image in djehuty. This option
 should point to a filesystem directory where these profile
 images can be stored. 



disable\-2fa 



Accounts with privileges receive a code by e\-mail as a second
 factor when logging in. Setting this option to 1 disables the
 second factor authentication. 



sandbox\-message 



Display a message on the top of every page. 



notice\-message 



Display a message on the main page. 



maintenance\-mode 



When set to 1, all HTTP requests result in the displayment of
 a maintenance message. Use this option while backing up the
 database, or when performing major updates. 




### 2\.2  Configuring the Database


The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






































































































The djehuty program stores its state in a SPARQL 1\.1 compliant RDF store. Configuring the connection
details is done in the rdf\-store node.
 

| Option | Description |
| state\-graph | The graph name to store triplets in. |
| sparql\-uri | The URI at which the SPARQL 1\.1 endpoint can be reached.When the sparql\-uri begins with bdb://, followed by a  path to a filesystem directory, it will use the BerkeleyDB  back\-end, for which the berkeleydb Python package needs to  be installed. |
| sparql\-update\-uri | The URI at which the SPARQL 1\.1 Update endpoint can be  reached (in case it is different from the sparql\-uri. |
|  |

 

### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




































































































Option 



Description 



state\-graph 



The graph name to store triplets in. 



sparql\-uri 



The URI at which the SPARQL 1\.1 endpoint can be reached.  
  
When the sparql\-uri begins with bdb://, followed by a
 path to a filesystem directory, it will use the BerkeleyDB
 back\-end, for which the berkeleydb Python package needs to
 be installed. 



sparql\-update\-uri 



The URI at which the SPARQL 1\.1 Update endpoint can be
 reached (in case it is different from the sparql\-uri. 




### 2\.3  Audit trails and database reconstruction


The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


































































































The djehuty program can keep an audit log of all database modifications made by itself from which a
database state can be reconstructed. Whether djehuty keeps such an audit log can be configured with the
following option:
 

| Option | Description |
| enable\-query\-audit\-log | When set to 1, it writes every SPARQL query that modifies  the database in the web logs. This can be replayed to  reconstruct the database at a later time. Setting this option  to 0 disables this feature. This element takes an attribute  transactions\-directory that should specify an empty  directory to which transactions can be written that are  extracted from the audit log. |
|  |

 

#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
































































































Option 



Description 



enable\-query\-audit\-log 



When set to 1, it writes every SPARQL query that modifies
 the database in the web logs. This can be replayed to
 reconstruct the database at a later time. Setting this option
 to 0 disables this feature. This element takes an attribute
 transactions\-directory that should specify an empty
 directory to which transactions can be written that are
 extracted from the audit log. 




#### 2\.3\.1  Reconstructing the database from the query audit log


Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






























































































Each query that modifies the database state while the query audit logs are enabled can be extracted from
the query audit log using the \-\-extract\-transactions\-from\-log command\-line option. A timestamp to
specify the starting point to extract from can be specified as an argument. The following example displays
its use:


```
djehuty web --config-file=config.xml --extract-transactions-from-log="YYYY-MM-DD HH:MM:SS"
```

This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




























































































This will create a file for each query in the folder specified in the transactions\-directory
attribute.
 
 
To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


























































































To replay the extracted transactions, use the apply\-transactions command\-line option: 

```
djehuty web --config-file=config.xml --apply-transactions
```

When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
























































































When a query cannot be executed, the command stops, allowing to fix or remove the query to\-be\-replayed.
Invoking the \-\-apply\-transactions command a second time will continue replaying where the previous
run stopped.

### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```























































































### 2\.4  Configuring storage


Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




















































































Storage locations can be configured with the storage node. When configuring multiple locations, djehuty
attempts to find a file by looking at the first configured location, and in case it cannot find the file
there, it will look at the second configured location, and so on, until it has tried each storage
location.
This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


















































































This allows for moving files between storage systems transparently without requiring specific interactions
with djehuty other than having the files made available as a POSIX filesystem.
One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
















































































One use\-case that suits this mechanism is letting uploads write to fast online storage and later move the
uploaded files to a slower but less costly storage.
 

| Option | Description |
| location | A filesystem path to where files are stored. This is a repeatable  property. |
|  |

 

### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```














































































Option 



Description 



location 



A filesystem path to where files are stored. This is a repeatable
 property. 




### 2\.5  Configuring an identity provider


Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```












































































Ideally, djehuty makes use of an external identity provider. djehuty can use SAML2\.0, ORCID, or an
internal identity provider (for testing and development purposes only).
This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










































































This section will outline the configuration options for each identity provision mechanism.

#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```









































































#### 2\.5\.1  SAML2\.0


For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






































































For SAML 2\.0, the configuration can be placed in the saml section under authentication. That looks as
following:


```
<authentication> 
  <saml version="2.0"> 
    <!-- Configuration goes here. --> 
  </saml> 
</authentication>
```

The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




































































The options outlined in the remainder of this section should be placed where the example shows \<!–
Configuration goes here. –\>.
 

| Option | Description |
| strict | When set to 1, SAML responses must be signed. Never disable ‘strict’ mode in a production environment. |
| debug | Increases logging verbosity for SAML\-related messages. |
| attributes | In this section the attributes provided by the identity provider  can be aligned to the attributes djehuty expects. |
| service\-provider | The djehuty program fulfills the role of service provider. In  this section the certificate and service provider metadata can  be configured. |
| identity\-provider | In this section the certificate and single\-sign\-on URL of the  identity provider can be configured. |
| sram | In this section, SURF Research Access Management\-specific  attributes can be configured. |
|  |

 

##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


































































Option 



Description 



strict 



When set to 1, SAML responses must be signed. Never
disable ‘strict’ mode in a production environment. 



debug 



Increases logging verbosity for SAML\-related messages. 



attributes 



In this section the attributes provided by the identity provider
 can be aligned to the attributes djehuty expects. 



service\-provider 



The djehuty program fulfills the role of service provider. In
 this section the certificate and service provider metadata can
 be configured. 



identity\-provider 



In this section the certificate and single\-sign\-on URL of the
 identity provider can be configured. 



sram 



In this section, SURF Research Access Management\-specific
 attributes can be configured. 




##### The attributes configuration


To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
































































To create account and author records and to authenticate a user, djehuty stores information provided by
the identity provider. Each identity provider may provide this information using different attributes.
Therefore, the translation from attributes used by djehuty and attributes given by the identity provider
can be configured. The following attributes must be configured.
 

| Option | Description |
| first\-name | A user’s first name. |
| last\-name | A user’s last name. |
| common\-name | A user’s full name. |
| email | A user’s e\-mail address. |
| groups | The attribute denoting groups. |
| group\-prefix | The prefix for each group short name. |
|  |

 
As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






























































Option 



Description 



first\-name 



A user’s first name. 



last\-name 



A user’s last name.



common\-name 



A user’s full name. 



email 



A user’s e\-mail address. 



groups 



The attribute denoting groups. 



group\-prefix 



The prefix for each group short name. 



As an example, the attributes configuration for SURFConext looks like this:


```
<attributes> 
  <first-name>urn:mace:dir:attribute-def:givenName</first-name> 
  <last-name>urn:mace:dir:attribute-def:sn</last-name> 
  <common-name>urn:mace:dir:attribute-def:cn</common-name> 
  <email>urn:mace:dir:attribute-def:mail</email> 
</attributes>
```

And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




























































And for SURF Research Access Management (SRAM), the attributes configuration looks like
this:


```
<attributes> 
  <first-name>urn:oid:2.5.4.42</first-name> 
  <last-name>urn:oid:2.5.4.4</last-name> 
  <common-name>urn:oid:2.5.4.3</common-name> 
  <email>urn:oid:0.9.2342.19200300.100.1.3</email> 
  <groups>urn:oid:1.3.6.1.4.1.5923.1.1.1.7</groups> 
  <group-prefix>urn:mace:surf.nl:sram:group:[organisation]:[service]</group-prefix> 
</attributes>
```


##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```



























































##### The sram configuration


When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
























































When using SURF Research Access Management (SRAM), djehuty can persuade SRAM to send an
invitation to anyone inside or outside the institution to join the SRAM collaboration that provides access to
the djehuty instance. To do so, the following attributes must be configured.
 

| Option | Description |
| organization\-api\-token | An organization\-level API token. |
| collaboration\-id | The UUID of the collaboration to invite users to. |
|  |

 

##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






















































Option 



Description 



organization\-api\-token 



An organization\-level API token. 



collaboration\-id 



The UUID of the collaboration to invite users to. 




##### The service\-provider configuration


 

| Option | Description |
| x509\-certificate | Contents of the public certificate without whitespacing. |
| private\-key | Contents  of the private key belonging to the x509\-certificate to sign  messages with. |
| metadata | This section contains metadata that may be displayed by the  identity provider to users before authorizing them. |
| display\-name | The name to be displayed by the identity provider when  authorizing the user to the service. |
| url | The URL to the service. |
| description | Textual description of the service. |
| organization | This section contains metadata to describe the organization  behind the service. |
| name | The name of the service provider’s organization. |
| url | The URL to the web page of the organization. |
| contact | A repeatable section to list contact persons and their roles  within the organization. The role can be configured by setting  the type attribute. |
| first\-name | The first name of the contact person. |
| last\-name | The last name of the contact person. |
| email | The e\-mail address of the contact person. Note that some  identity providers prefer functional e\-mail addresses (e.g.  support@... instead of jdoe@...). |
|  |

 

#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




















































Option 



Description 



x509\-certificate 



Contents of the public certificate without whitespacing. 



private\-key 



Contents
 of the private key belonging to the x509\-certificate to sign
 messages with. 



metadata 



This section contains metadata that may be displayed by the
 identity provider to users before authorizing them. 



  display\-name 



The name to be displayed by the identity provider when
 authorizing the user to the service. 



  url 



The URL to the service. 



  description 



Textual description of the service.



  organization 



This section contains metadata to describe the organization
 behind the service. 



    name 



The name of the service provider’s organization. 



    url 



The URL to the web page of the organization. 



  contact 



A repeatable section to list contact persons and their roles
 within the organization. The role can be configured by setting
 the type attribute. 



    first\-name 



The first name of the contact person. 



    last\-name 



The last name of the contact person. 



    email 



The e\-mail address of the contact person. Note that some
 identity providers prefer functional e\-mail addresses (e.g.
 support@... instead of jdoe@...). 




#### 2\.5\.2  ORCID


[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


















































[ORCID.org](https://orcid.org) plays a key role in making researchers findable. Its identity provider service can be used by
djehuty in two ways:
 
 
 
 1\. As primary identity provider to log in and deposit data;
 
 2\. As additional identity provider to couple an author record to its ORCID record.
When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
















































When another identity provider is configured in addition to ORCID, that identity provider will be used
as primary and ORCID will only be used to couple author records to the author’s ORCID
record.
To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```














































To configure ORCID, the configuration can be placed in the orcid section under authentication. That
looks as following:


```
<authentication> 
  <orcid> 
    <!-- Configuration goes here. --> 
  </orcid> 
</authentication>
```

Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```












































Then the following parameters can be configured:
 

| Option | Description |
| client\-id | The client ID provided by ORCID. |
| client\-secret | The client secret provided by ORCID. |
| endpoint | The URL to the ORCID endpoint to use. |
|  |

 

### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










































Option 



Description 



client\-id 



The client ID provided by ORCID. 



client\-secret 



The client secret provided by ORCID. 



endpoint 



The URL to the ORCID endpoint to use. 




### 2\.6  Configuring an e\-mail server


On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```








































On various occassions, djehuty will attempt to send an e\-mail to either an author, a reviewer or an
administrator. To be able to do so, an e\-mail server must be configured from which the instance may send
e\-mails.
The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






































The configuration is done under the email node, and the following items can be configured:
 

| Option | Description |
| server | Address of the e\-mail server without protocol specification. |
| port | The port the e\-mail server operates on. |
| starttls | When 1, djehuty attempts to use StartTLS. |
| username | The username to authenticate with to the e\-mail server. |
| password | The password to authenticate with to the e\-mail server. |
| from | The e\-mail address used to send e\-mail from. |
| subject\-prefix | Text to prefix in the subject of all e\-mails sent from the  instance of djehuty. This can be used to distinguish a test  instance from a production instance. |
|  |

 

### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




































Option 



Description 



server 



Address of the e\-mail server without protocol specification. 



port 



The port the e\-mail server operates on. 



starttls 



When 1, djehuty attempts to use StartTLS. 



username 



The username to authenticate with to the e\-mail server. 



password 



The password to authenticate with to the e\-mail server.



from 



The e\-mail address used to send e\-mail from. 



subject\-prefix 



Text to prefix in the subject of all e\-mails sent from the
 instance of djehuty. This can be used to distinguish a test
 instance from a production instance. 




### 2\.7  Configuring DOI registration


When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


































When publishing a dataset or collection, djehuty can register a persistent identifier with DataCite. To
enable this feature, configure it under the datacite node. The following parameters can be
configured:
 

| Option | Description |
| api\-url | The URL of the API endpoint of DataCite. |
| repository\-id | The repository identifier given by DataCite. |
| password | The password to authenticate with to DataCite. |
| prefix | The DOI prefix to use when registering a DOI. |
|  |

 

### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
































Option 



Description 



api\-url 



The URL of the API endpoint of DataCite. 



repository\-id 



The repository identifier given by DataCite. 



password 



The password to authenticate with to DataCite. 



prefix 



The DOI prefix to use when registering a DOI. 




### 2\.8  Configuring Handle registration


Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






























Each uploaded file can be assigned a persistent identifier using the Handle system. To enable this feature,
configure it under the handle node. The following parameters can be configured:
 

| Option | Description |
| url | The URL of the API endpoint of the Handle system  implementor. |
| certificate | Certificate to use for authenticating to the endpoint. |
| private\-key | The private key paired with the certificate used to authenticate  to the endpoint. |
| prefix | The Handle prefix to use when registering a handle. |
| index | The index to use when registering a handle. |
|  |

 

### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




























Option 



Description 



url 



The URL of the API endpoint of the Handle system
 implementor. 



certificate 



Certificate to use for authenticating to the endpoint. 



private\-key 



The private key paired with the certificate used to authenticate
 to the endpoint. 



prefix 



The Handle prefix to use when registering a handle. 



index 



The index to use when registering a handle. 




### 2\.9  Configuring IIIF support


When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


























When publishing images, djehuty can enable the IIIF Image API for the images. It uses libvips
and pyvips under the hood to perform image manipulation. The following parameters can be
configured:
 

| Option | Description |
| enable\-iiif | Enable support for the IIIF image API. This requires the  pyvips package to be available in the run\-time environment. |
| iiif\-cache\-root | The directory to store the output of IIIF Image API requests  to avoid re\-computing the image. |
|  |

 

### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
























Option 



Description 



enable\-iiif 



Enable support for the IIIF image API. This requires the
 pyvips package to be available in the run\-time environment. 



iiif\-cache\-root 



The directory to store the output of IIIF Image API requests
 to avoid re\-computing the image. 




### 2\.10  Customizing looks


With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```






















With the following options, the instance can be branded as necessary.
 
 
 

| Option | Description |
| site\-name | Name for the instance used in the title of a browser window  and as default value in the publisher field for new datasets. |
| site\-description | Description used as a meta\-tag in the HTML output. |
| site\-shorttag | Used as keyword and as Git remote name. |
| support\-email\-address | E\-mail address used in e\-mails sent to users in automated  messages. |
| custom\-logo\-path | Path to a PNG image file that will be used as logo on the  website. |
| custom\-favicon\-path | Path to an ICO file that will be used as favicon. |
| small\-footer | HTML that will be used as footer for all pages except for the  main page. |
| large\-footer | HTML that will be used as footer on the main page. |
| show\-portal\-summary | When set to 1, it shows the repository summary of number of  datasets, authors, collections, files and bytes on the main page. |
| show\-institutions | When set to 1, it shows the list of institutions on the main  page. |
| show\-science\-categories | When set to 1, it shows the subjects (categories) on the main  page. |
| show\-latest\-datasets | When set to 1, it shows the list of latest published datasets on  the main page. |
| colors | Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). |
|  |

 

#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```




















Option 



Description 



site\-name 



Name for the instance used in the title of a browser window
 and as default value in the publisher field for new datasets. 



site\-description 



Description used as a meta\-tag in the HTML output. 



site\-shorttag 



Used as keyword and as Git remote name. 



support\-email\-address 



E\-mail address used in e\-mails sent to users in automated
 messages. 



custom\-logo\-path 



Path to a PNG image file that will be used as logo on the
 website. 



custom\-favicon\-path 



Path to an ICO file that will be used as favicon. 



small\-footer 



HTML that will be used as footer for all pages except for the
 main page. 



large\-footer 



HTML that will be used as footer on the main page. 



show\-portal\-summary 



When set to 1, it shows the repository summary of number of
 datasets, authors, collections, files and bytes on the main page. 



show\-institutions 



When set to 1, it shows the list of institutions on the main
 page. 



show\-science\-categories 



When set to 1, it shows the subjects (categories) on the main
 page. 



show\-latest\-datasets 



When set to 1, it shows the list of latest published datasets on
 the main page. 



colors 



Colors used in the HTML output. See section [2\.10\.1](#x1-260002.10.1). 




#### 2\.10\.1  Customizing colors


The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```


















The following options can be configured in the colors section.
 

| Option | Description |
| primary\-color | The main background color to use. |
| primary\-foreground\-color | The main foreground color to use. |
| primary\-color\-hover | Color to use when hovering a link. |
| primary\-color\-active | Color to use when a link is clicked. |
| privilege\-button\-color | The background color of buttons for privileged actions. |
| footer\-background\-color | Color to use in the footer. |
|  |

 

### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```
















Option 



Description 



primary\-color 



The main background color to use. 



primary\-foreground\-color 



The main foreground color to use. 



primary\-color\-hover 



Color to use when hovering a link. 



primary\-color\-active 



Color to use when a link is clicked. 



privilege\-button\-color 



The background color of buttons for privileged actions. 



footer\-background\-color 



Color to use in the footer. 




### 2\.11  Configuring privileged users


By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```














By default an authenticated user may deposit data. But users can have additional roles; for example: a
dataset reviewer, a technical administrator or a quota reviewer.
Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```












Such additional roles are configured in terms of privileges. The following privileges can be configured in the
privileges section:
 
 
 

| Option | Description |
| may\-administer | Allows access to perform maintenance tasks, view accounts and  view reports on restricted and embargoed datasets. |
| may\-run\-sparql\-queries | Allows to run arbitrary SPARQL queries on the database. |
| may\-impersonate | Allows to log in to any account and therefore perform any  action as that account. |
| may\-review | Allows to see which datasets are sent for review, and allows to  perform reviews. |
| may\-review\-quotas | Allows access to see requests for storage quota increases and  approve or decline them. |
| may\-review\-integrity | Allows access to an API call that provides statistics on the  accessibility of files on the filesystem. |
| may\-process\-feedback | Accounts with this privilege will receive e\-mails with the  information entered into the feedback form by other users. |
| may\-receive\-email\-notifications | This “privilege” can be used to disable sending any e\-mails to  an account by setting it to 0. The default is 1. |
|  |

 
To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```










Option 



Description 



may\-administer 



Allows access to perform maintenance tasks, view accounts and
 view reports on restricted and embargoed datasets. 



may\-run\-sparql\-queries 



Allows to run arbitrary SPARQL queries on the database. 



may\-impersonate 



Allows to log in to any account and therefore perform any
 action as that account. 



may\-review 



Allows to see which datasets are sent for review, and allows to
 perform reviews. 



may\-review\-quotas 



Allows access to see requests for storage quota increases and
 approve or decline them. 



may\-review\-integrity 



Allows access to an API call that provides statistics on the
 accessibility of files on the filesystem. 



may\-process\-feedback 



Accounts with this privilege will receive e\-mails with the
 information entered into the feedback form by other users. 



may\-receive\-email\-notifications



This “privilege” can be used to disable sending any e\-mails to
 an account by setting it to 0. The default is 1. 



To enable a privilege for an account, set the value of the desired privilege to 1. Privileges are disabled by
default, except for may\-receive\-email\-notifications which defaults to 1.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-run-sparql-queries>1</may-run-sparql-queries> 
      <may-impersonate>1</may-impersonate> 
      <may-review>0</may-review> 
      <may-review-quotas>0</may-review-quotas> 
      <may-review-integrity>0</may-review-integrity> 
      <may-process-feedback>0</may-process-feedback> 
      <may-receive-email-notifications>1</may-receive-email-notifications> 
    </account> 
  </privileges>
```














Chapter 3Knowledge graph
------------------------


djehuty processes its information using the Resource Description Framework ([Lassila](#Xlassila-99-rdf), [1999](#Xlassila-99-rdf)). This chapter
describes the parts that make up the data model of djehuty.
### 3\.1  Use of vocabularies


Throughout this chapter, abbreviated references to ontologies are used. Table [3\.1](#x1-29001r1) lists these
abbreviations.



---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---





### 3\.2  Notational shortcuts


In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---



















































Chapter 3Knowledge graph
------------------------



djehuty processes its information using the Resource Description Framework ([Lassila](#Xlassila-99-rdf), [1999](#Xlassila-99-rdf)). This chapter
describes the parts that make up the data model of djehuty.
### 3\.1  Use of vocabularies


Throughout this chapter, abbreviated references to ontologies are used. Table [3\.1](#x1-29001r1) lists these
abbreviations.



---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---





### 3\.2  Notational shortcuts


In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

















































Throughout this chapter, abbreviated references to ontologies are used. Table [3\.1](#x1-29001r1) lists these
abbreviations.



---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---





### 3\.2  Notational shortcuts


In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

















































---




| Abbreviation | Ontology URI |
| djht | [https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) |
| rdf | [http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) |
| rdfs | [http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) |
| xsd | [http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) |
|  |


   Table 3\.1: Lookup table for vocabulary URIs and their abbreviations.   



---






Ontology URI 



[https://ontologies.data.4tu.nl/djehuty/24\.10\.1/](https://ontologies.data.4tu.nl/djehuty/24.10.1/) 



[http://www.w3\.org/1999/02/22\-rdf\-syntax\-ns\#](http://www.w3.org/1999/02/22-rdf-syntax-ns) 



[http://www.w3\.org/2000/01/rdf\-schema\#](http://www.w3.org/2000/01/rdf-schema) 



[http://www.w3\.org/2001/XMLSchema\#](http://www.w3.org/2001/XMLSchema) 



In addition to abbreviating ontologies with their prefix we use another notational shortcut. To effectively
communicate the structure of the RDF graph used by djehuty we introduce a couple of shorthand
notations.

#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---














































#### 3\.2\.1  Notation for typed triples


When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---











































When the object in a triple is typed, we introduce the shorthand to only show the type, rather than the
actual value of the object. Figure [3\.1](#x1-31001r1) displays this for URIs, and figure [3\.2](#x1-31002r2) displays this for
literals.


---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---











































---




 ![PIC](figures/typed-notation-.png)





  
    Figure 3\.1: Shorthand notation for triples with an rdf:type which features a hollow
predicate arrow and a colored type specifier with rounded corners.   



---


Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---








































 ![PIC](figures/typed-notation-.png)





 ![PIC](figures/typed-notation-.png)





Literals are depicted by rectangles (with sharp edges) in contrast to URIs which are depicted as rectangles
with rounded edges.


---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---







































---




 ![PIC](figures/typed-literals-notation-.png)





  
    Figure 3\.2: Shorthand notation for triples with a literal, which features a hollow predicate
arrow and a colored rectangular type specifier.   



---


When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---




































 ![PIC](figures/typed-literals-notation-.png)





 ![PIC](figures/typed-literals-notation-.png)





When the subject of a triple is the shorthand type, assume the subject is not the type itself but the subject
which has that type.
#### 3\.2\.2  Notation for rdf:List


To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

































To preserve the order in which lists were formed, the data model makes use of rdf:List with numeric
indexes. This pattern will be abbreviated in the remainder of the figures as displayed in figure
[3\.3](#x1-32001r3).


---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

































---




 ![PIC](figures/rdf-list-abbrev-.png)





  
    Figure 3\.3: Shorthand notation for rdf:List with numeric indexes, which features a
hollow double\-arrow. Lists have arbitrary lengths, and the numeric indexes use 1\-based
indexing.   



---


The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---






























 ![PIC](figures/rdf-list-abbrev-.png)





 ![PIC](figures/rdf-list-abbrev-.png)





The hollow double\-arrow depicts the use of an rdf:List with numeric indexes.
### 3\.3  Datasets


Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---



























Datasets play a central role in the repository system because every other type links in one way or another
to it. The user submits files along with data about those bytes as a single record which we
call a djht:Dataset. Figure [3\.4](#x1-33001r4) shows how the remainder of types in this chapter relate to a
djht:Dataset.


---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---



























---




 ![PIC](figures/dataset-.png)





  
    Figure 3\.4: The RDF pattern for a djht:Dataset. For a full overview of djht:Dataset
properties, use the exploratory from the administration panel.   



---


Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---
























 ![PIC](figures/dataset-.png)





 ![PIC](figures/dataset-.png)





Datasets are versioned records. The data and metadata between versions can differ, except all versions of a
dataset share an identifier. We use djht:DatasetContainer to describe the version\-unspecific properties of
a set of versioned datasets.


---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---























---




 ![PIC](figures/dataset-container-.png)





  
    Figure 3\.5: The RDF pattern for a djht:DatasetContainer. All versions of a dataset
share a djht:dataset\_id and a UUID in the container URI.   



---


The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---




















 ![PIC](figures/dataset-container-.png)





 ![PIC](figures/dataset-container-.png)





The data model follows a natural expression of published versions as a linked list. Figure [3\.5](#x1-33002r5) further
reveals that the view, download, share and citation counts are stored in a version\-unspecific
way.
### 3\.4  Accounts


djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

















djehuty uses an external identity provider, but stores an e\-mail address, full name, and preferences for
categories.


---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---

















---




 ![PIC](figures/account-.png)





  
    Figure 3\.6: The RDF pattern for an djht:Account.   



---


### 3\.5  Funding


When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---














 ![PIC](figures/account-.png)





 ![PIC](figures/account-.png)





When the djht:Dataset originated out of a funded project, the funders can be listed using djht:Funding.
Figure [3\.7](#x1-35001r7) displays the details for this structure.


---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---













---




 ![PIC](figures/funding-.png)





  
    Figure 3\.7: The RDF pattern for a djht:Funding.   



---










 ![PIC](figures/funding-.png)





 ![PIC](figures/funding-.png)











Chapter 4Contributing
---------------------


This chapter outlines how to set up an instance of djehuty with the goal of modifying its source code. Or
in other words: this is the developer setup.
### 4\.1  Setting up a development environment


First, we need to obtain the latest version of the source code: 

```
$ git clone https://github.com/4TUResearchData/djehuty.git
```

Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





































































































Chapter 4Contributing
---------------------



This chapter outlines how to set up an instance of djehuty with the goal of modifying its source code. Or
in other words: this is the developer setup.
### 4\.1  Setting up a development environment


First, we need to obtain the latest version of the source code: 

```
$ git clone https://github.com/4TUResearchData/djehuty.git
```

Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



































































































First, we need to obtain the latest version of the source code: 

```
$ git clone https://github.com/4TUResearchData/djehuty.git
```

Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

































































































Next, we need to create a somewhat isolated Python environment: 

```
$ python -m venv djehuty-env 
$ . djehuty-env/bin/activate 
[env]$ cd djehuty 
[env]$ pip install -r requirements.txt
```

And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.































































































And finally, we can install djehuty in the virtual environment to make the djehuty command available:


```
[env]$ sed -e 's/@VERSION@/0.0.1/g' pyproject.toml.in > pyproject.toml 
[env]$ pip install --editable .
```

If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





























































































If all went well, we will now be able to run djehuty: 

```
[env]$ djehuty --help
```


### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.




























































































### 4\.2  Configuring djehuty


Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

























































































Invoking djehuty web starts the web interface of djehuty. On what port it makes itself available
can be configured in its configuration file. An example of a configuration file can be found in
‘etc/djehuty/djehuty\-example\-config.xml’. We will use the example configuration as the basis to
configure it for the development environment.


```
[env]$ cp etc/djehuty/djehuty-example-config.xml config.xml
```

In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.























































































In the remainder of the chapter we will assume a value of 127\.0\.0\.1 for bind\-address and a value of 8080
for port.
 
 

#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.






















































































#### 4\.2\.1  Modifications to the example configuration for developers


The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



















































































The chapter [2](#x1-90002) ‘[Configuring djehuty](#x1-90002)’ describes each configuration option for djehuty. The
remainder of sections here contain a fast\-path through configuring djehuty for use in a development
setup.

##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.


















































































##### Live reload


The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.















































































The djehuty program can be configured to automatically reload itself when a change is detected by setting
live\-reload to 1.

##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.














































































##### Configuring authentication with ORCID


The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.











































































The djehuty program does not have Identity Provider (IdP) capabilities, so in order to log into the system
we must configure an external IdP. With an [ORCID](https://orcid.org) account comes the ability to set up an OAuth
endpoint. Go to [developer\-tools](https://orcid.org/developer-tools) at [orcid.org](https://orcid.org). When setting up the OAuth at ORCID, choose
http://127\.0\.0\.1:8080/login as redirect URI.
Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.









































































Modify the following bits to reflect the settings obtained from ORCID. 

```
  <authentication> 
    <orcid> 
      <client-id>APP-XXXXXXXXXXXXXXXX</client-id> 
      <client-secret>XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX</client-secret> 
      <endpoint>https://orcid.org/oauth</endpoint> 
    </orcid> 
  </authentication>
```

To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.







































































To limit who can log into a development system, accounts are not automatically created for ORCID as IdP.
So we need to configure who can log in by creating a record in the privileges section of the configuration
file.
This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





































































This is also a good moment to configure additional privileges for your account. In the following snippet,
configure the ORCID with which you will log into the system in the orcid argument.


```
  <privileges> 
    <account email="you@example.com" orcid="0000-0000-0000-0001"> 
      <may-administer>1</may-administer> 
      <may-impersonate>1</may-impersonate> 
      <may-review>1</may-review> 
    </account> 
  </privileges>
```


#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.




































































#### 4\.2\.2  Invoking djehuty


Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

































































Once we’ve configured djehuty for development use, we can start the web interface by running:
 
 


```
[env]$ djehuty web --initialize --config-file=config.xml
```

The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.































































The \-\-initialize option creates the internal account record and associates the specified ORCID with it.
We only need to run djehuty with the \-\-initialize option once.
By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





























































By now, we should be able to visit djehuty through a web browser at [localhost:8080](http://127.0.0.1:8080), unless
configured differently. We should be able to log in through ORCID, and access all features of
djehuty.

### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.




























































### 4\.3  Navigating the source code


In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

























































In this section, we trace the path from invoking djehuty to responding to a HTTP request.

#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.
























































#### 4\.3\.1  Starting point


Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





















































Because djehuty is installable as a Python package, we can find the starting point for running djehuty in
pyproject.toml. It reads: 

```
[project.scripts] 
djehuty = djehuty.ui:main
```

So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



















































So, we start our tour at ‘src/djehuty/ui.py’ in the procedure called main.

#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.


















































#### 4\.3\.2  How djehuty initializes


The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.















































The main procedure calls main\_inner, which handles the command\-line arguments. When
invoking djehuty, we usually invoke djehuty web, which is handled by the following snippet:


```
import djehuty.web.ui as web_ui 
... 
if args.command == "web": 
    web_ui.main (args.config_file, True, args.initialize, 
                 args.extract_transactions_from_log, 
                 args.apply_transactions)
```

So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.













































So, the entry\-point for the web subcommand is found in src/djehuty/web/ui.py at the main
procedure.
This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.











































This procedure essentially sets up an instance of ApiServer (found in src/djehuty/web/wsgi.py and uses
werkzeug’s run\_simple to start the web server.
 
 

#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.










































#### 4\.3\.3  Translating URI paths to internal procedures


An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.







































An instance of the ApiServer is passed along in werkzeug’s run\_simple procedure. Werkzeug calls the
instance directly, which is handled by the \_\_call\_\_ procedure of the ApiServer class. The \_\_call\_\_
procedure invokes its wsgi instance, which is configured as following: 

```
self.wsgi = SharedDataMiddleware(self.__respond, self.static_roots)
```

The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





































The \_\_respond procedure calls \_\_dispatch\_request
In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



































In \_\_dispatch\_request, the requested URI is translated into the procedure name using the url\_map. So,
except for static resources in the src/djehuty/web/resources folder and pre\-configured static pages, URIs
are handled by a procedure in the ApiServer instance.
A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

































A mapping between a URI and the procedure that is executed to handle the request to that URI can be
found in the url\_map defined in the ApiServer class in ‘wsgi.py’.

#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.
































#### 4\.3\.4  Diving into the code that displays the homepage


As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





























As an example, in the url\_map, we can find the following line: 

```
R("/", self.ui_home),
```

In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



























In this case, self is a reference to an instance of the ApiServer class, so we look for a procedure called
ui\_home inside the ApiServer class. Some code editors have a feature to “go to definition” which helps
navigating.
The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

























The ui\_home gathers the summary numbers from the SPARQL endpoint with the following line:


```
summary_data = self.db.repository_statistics()
```

And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.























And a list of the latest datasets with the following line: 

```
records = self.db.latest_datasets_portal(30)
```

It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.





















It then passes that information to the \_\_render\_template procedure which renders
the ‘portal.html’ in the ‘src/djehuty/web/resources/html\_templates’ folder. The
 
 
Jinja[1](djehuty6.html#fn1x4) 
package is used to interpret the template.


```
return self.__render_template (request, "portal.html", 
                               summary_data = summary_data, 
                               latest = records, ...)
```

#### 4\.3\.5  Database communication


In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.



















In the ui\_home procedure, we found a call to the self.db.repository\_statistics procedure. To find out
by hand where that procedure can be found, we can look for the place where self.db is assigned a
value:


```
self.db = database.SparqlInterface()
```

And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.

















And from there look up where database comes from: 

```
from djehuty.web import database
```

From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.















From which we can conclude that it can be found in ‘src/djehuty/web/database.py’.
In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.













In the repository\_statistics procedure, we find a call to self.\_\_query\_from\_template followed by a
call to \_\_run\_query which takes the output of the former procedure as its input.
As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.











As the name implies, \_\_run\_query sends the query to the SPARQL endpoint and retrieves the results by
putting them in a list of Python dictionaries.
The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.









The self.\_\_query\_from\_template procedure takes one parameter, which is the name of the template file
(minus the extension) that contains a SPARQL query. These templates can be found in the
‘src/djehuty/web/resources/sparql\_templates’ folder.













Chapter 5Application Programming Interface
------------------------------------------


The application programming interface (API) provided by djehuty allows for automating tasks otherwise
done through the user interface. In addition to automation, the API can also be used to gather additional
information, like statistics on Git repositories.
Throughout this chapter we provide examples for using the API using curl and jq. Another way of seeing
the API in action is to use the developer tools in a web browser while performing the desired action using
the web user interface.
### 5\.1  The /v2 public interface


The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 







































































































































Chapter 5Application Programming Interface
------------------------------------------



The application programming interface (API) provided by djehuty allows for automating tasks otherwise
done through the user interface. In addition to automation, the API can also be used to gather additional
information, like statistics on Git repositories.
Throughout this chapter we provide examples for using the API using curl and jq. Another way of seeing
the API in action is to use the developer tools in a web browser while performing the desired action using
the web user interface.
### 5\.1  The /v2 public interface


The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





































































































































Throughout this chapter we provide examples for using the API using curl and jq. Another way of seeing
the API in action is to use the developer tools in a web browser while performing the desired action using
the web user interface.
### 5\.1  The /v2 public interface


The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



































































































































The v2 API was designed by Figshare[1](djehuty7.html#fn1x5) .
djehuty implements a backward\-compatible version of it, with the following differences:
 
 1\. The id property is superseded by the uuid property.
 
 2\. Error handling is done through precise HTTP error codes, rather than always returning 400
 on a usage error.
Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

































































































































Unless specified otherwise, the HTTP Content\-Type to interact with the API is application/json. In the
case an API call returns information, don’t forget to set the HTTP Accept header appropriately.
#### 5\.1\.1  /v2/articles (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 































































































































The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, datasets published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only datasets modified after this timestamp are  shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns datasets associated with this DOI. |
| item\_type | Optional | Either 3 for datasets or 9 for software. |
| doi | Optional | The DOI of the dataset to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





























































































































Parameter 



Required 



Description 



order 



Optional 



Field to use for sorting. 



order\_direction 



Optional 



Can be either asc or desc. 



institution 



Optional 



The institution identifier to filter on. 



published\_since 



Optional 



When set, datasets published before this timestamp are
 dropped from the results. 



modified\_since 



Optional 



When set, only datasets modified after this timestamp are
 shown from the results. 



group 



Optional 



The group identifier to filter on. 



resource\_doi 



Optional 



The DOI of the associated journal publication. When set,
 only returns datasets associated with this DOI. 



item\_type 



Optional 



Either 3 for datasets or 9 for software. 



doi 



Optional 



The DOI of the dataset to search for. 



handle 



Optional 



Unused. 



page 



Optional 



The page number used in combination with page\_size. 



page\_size 



Optional 



The number of datasets per page. Used in combination with
 page. 



limit 



Optional 



The maximum number of datasets to output. Used together
 with offset. 



offset 



Optional 



The number of datasets to skip in the output. Used together
 with limit. 



Example usage: 

```
curl "https://data.4tu.nl/v2/articles?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



























































































































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "4f8a9423-83fc-4263-9bb7-2aa83d73865d", 
    "title": "Measurement data of a Low Speed Field Test of Tractor Se...", 
    "doi": "10.4121/4f8a9423-83fc-4263-9bb7-2aa83d73865d.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "published_date": "2024-07-26T10:39:57", 
    "thumb": null, 
    "defined_type": 3, 
    "defined_type_name": "dataset", 
    "group_id": 28589, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/4f8a...865d", 
    "url_public_api": "https://data.4tu.nl/v2/articles/4f8a...865d", 
    "url_private_html": "https://data.4tu.nl/my/datasets/4f8a...865d/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/4f8a...865d/1", 
    ... 
  } 
]
```


#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 


























































































































#### 5\.1\.2  /v2/articles/search (HTTP POST)


In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 























































































































In addition to the parameters of section [5\.1\.1](#x1-510005.1.1) ‘[/v2/articles (HTTP GET)](#x1-510005.1.1)’, the following parameters can be
used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





















































































































Parameter 



Required 



Description 



search\_for 



Optional 



The terms to search for. 



Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "djehuty" }'\ 
     https://data.4tu.nl/v2/articles/search | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



















































































































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
    "title": "Source code of the 4TU.ResearchData repository", 
    "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
    "handle": null, 
    "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "published_date": "2023-03-20T11:29:10", 
    "thumb": null, 
    "defined_type": 9, 
    "defined_type_name": "software", 
    "group_id": 28586, 
    "url_private_api": "https://data.4tu.nl/v2/account/articles/342e...49d2", 
    "url_public_api": "https://data.4tu.nl/v2/articles/342e...49d2", 
    "url_private_html": "https://data.4tu.nl/my/datasets/342e...49d2/edit", 
    "url_public_html": "https://data.4tu.nl/datasets/342e...49d2/1", 
    ... 
  } 
]
```


#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 


















































































































#### 5\.1\.3  /v2/articles/\<dataset\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 















































































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 













































































































Output of the example: 

```
{ /* Example output has been shortened. */ 
  "files": ..., 
  "custom_fields": ..., 
  "authors": ..., 
  "description": "<p>This dataset contains the source code of the 4TU...", 
  "license": ..., 
  "tags": ..., 
  "categories": ..., 
  "references": ..., 
  "id": null, 
  "uuid": "342efadc-66f8-4e9b-9d27-da7b28b849d2", 
  "title": "Source code of the 4TU.ResearchData repository", 
  "doi": "10.4121/342efadc-66f8-4e9b-9d27-da7b28b849d2.v1", 
  "url": "https://data.4tu.nl/v2/articles/342e...49d2", 
  "published_date": "2023-03-20T11:29:10", 
  "timeline": ..., 
  ... 
}
```


#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 












































































































#### 5\.1\.4  /v2/articles/\<dataset\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 









































































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions | jq
```

Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 







































































































Output of the example: 

```
[ 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1" 
  } 
]
```


#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 






































































































#### 5\.1\.5  /v2/articles/\<dataset\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



































































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/versions/1 | jq
```

The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

































































































The output of the example is identical to the example output of section [5\.1\.3](#x1-530005.1.3) ‘[/v2/articles/\<dataset\-id\>
(HTTP GET)](#x1-530005.1.3)’.

#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 
































































































#### 5\.1\.6  /v2/articles/\<dataset\-id\>/versions/\<version\>/embargo (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





























































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/c1274889-b797-43bd-a3b1-ee0611d58fd7/versions/2/embargo | jq
```

Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



























































































Output of the example: 

```
{ 
  "is_embargoed": true, 
  "embargo_date": "2039-06-30", 
  "embargo_type": "article", 
  "embargo_title": "Under embargo", 
  "embargo_reason": "<p>Need consent to publish the data</p>", 
  "embargo_options": [] 
}
```


#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 


























































































#### 5\.1\.7  /v2/articles/\<dataset\-id\>/files (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 























































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/342efadc-66f8-4e9b-9d27-da7b28b849d2/files
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





















































































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
    "name": "djehuty-0.0.1.tar.gz", 
    "size": 3713709, 
    "is_link_only": false, 
    "is_incomplete": false, 
    "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
    "supplied_md5": null, 
    "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
  } 
]
```


#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 




















































































#### 5\.1\.8  /v2/articles/\<dataset\-id\>/files/\<file\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

















































































Example usage: 

```
curl https://data.4tu.nl/v2/articles/342e...49d2/files/d3e1...9292 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 















































































Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "d3e1c325-7fa9-4cb9-884e-0b9cd2059292", 
  "name": "djehuty-0.0.1.tar.gz", 
  "size": 3713709, 
  "is_link_only": false, 
  "is_incomplete": false, 
  "download_url": "https://data.4tu.nl/file/342e...49d2/d3e1...9292", 
  "supplied_md5": null, 
  "computed_md5": "910e9b0f79a0af548f59b3d8a56c3bf4" 
}
```


#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 














































































#### 5\.1\.9  /v2/collections (HTTP GET)


The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 











































































The following parameters can be used:
 
 
 

| Parameter | Required | Description |
| order | Optional | Field to use for sorting. |
| order\_direction | Optional | Can be either asc or desc. |
| institution | Optional | The institution identifier to filter on. |
| published\_since | Optional | When set, collections published before this timestamp are  dropped from the results. |
| modified\_since | Optional | When set, only collections modified after this timestamp  are shown from the results. |
| group | Optional | The group identifier to filter on. |
| resource\_doi | Optional | The DOI of the associated journal publication. When set,  only returns collections associated with this DOI. |
| doi | Optional | The DOI of the collection to search for. |
| handle | Optional | Unused. |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of collections per page. Used in combination  with page. |
| limit | Optional | The maximum number of collections to output. Used  together with offset. |
| offset | Optional | The number of collections to skip in the output. Used  together with limit. |
|  |

 
Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 









































































Parameter 



Required 



Description 



order 



Optional 



Field to use for sorting. 



order\_direction 



Optional 



Can be either asc or desc. 



institution 



Optional 



The institution identifier to filter on. 



published\_since 



Optional 



When set, collections published before this timestamp are
 dropped from the results. 



modified\_since 



Optional 



When set, only collections modified after this timestamp
 are shown from the results. 



group 



Optional 



The group identifier to filter on. 



resource\_doi 



Optional 



The DOI of the associated journal publication. When set,
 only returns collections associated with this DOI. 



doi 



Optional 



The DOI of the collection to search for. 



handle 



Optional 



Unused. 



page 



Optional 



The page number used in combination with page\_size. 



page\_size 



Optional 



The number of collections per page. Used in combination
 with page. 



limit 



Optional 



The maximum number of collections to output. Used
 together with offset. 



offset 



Optional 



The number of collections to skip in the output. Used
 together with limit. 



Example usage: 

```
curl "https://data.4tu.nl/v2/collections?limit=100&published_since=2024-07-25" | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 







































































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": null, 
    "uuid": "0fe9ab80-6e6a-4087-a509-ce09dddfa3d9", 
    "title": "PhD research 'Untangling the complexity of local water ...'", 
    "doi": "10.4121/0fe9ab80-6e6a-4087-a509-ce09dddfa3d9.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/0fe9...fa3d9", 
    "timeline": { 
      "posted": "2024-08-13T14:09:52", 
      "firstOnline": "2024-08-13T14:09:51", 
      ... 
    }, 
    "published_date": "2024-08-13T14:09:52" 
  }, 
  ... 
]
```


#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 






































































#### 5\.1\.10  /v2/collections/search (HTTP POST)


In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



































































In addition to the parameters of section [5\.1\.9](#x1-590005.1.9) ‘[/v2/collections (HTTP GET)](#x1-590005.1.9)’, the following parameters
can be used.
 

| Parameter | Required | Description |
| search\_for | Optional | The terms to search for. |
|  |

 
Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

































































Parameter 



Required 



Description 



search\_for 



Optional 



The terms to search for. 



Example usage: 

```
curl --request POST\ 
     --header "Content-Type: application/json"\ 
     --data '{ "search_for": "wingtips" }'\ 
     https://data.4tu.nl/v2/collections/search | jq
```

Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 































































Output of the example: 

```
[  /* Example output has been shortened. */ 
  { 
    "id": 6070238, 
    "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
    "title": "Flared Folding Wingtips - TU Delft", 
    "doi": "10.4121/c.6070238.v1", 
    "handle": "", 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782", 
    "timeline": { 
      "posted": "2023-04-05T15:05:04", 
      "firstOnline": "2023-04-05T15:05:03", 
      ... 
    }, 
    "published_date": "2023-04-05T15:05:04" 
  }, 
  ... 
]
```


#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 






























































#### 5\.1\.11  /v2/collections/\<collection\-id\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



























































Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

























































Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 3, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "created_date": "2024-08-08T15:48:55", 
  "modified_date": "2024-08-12T11:24:39", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v3", 
  "published_date": "2024-08-12T11:24:40", 
  "timeline": ... 
  ... 
}
```


#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 
























































#### 5\.1\.12  /v2/collections/\<collection\-id\>/versions (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





















































Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



















































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "version": 3, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/3" 
  }, 
  { 
    "version": 2, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/2" 
  }, 
  { 
    "version": 1, 
    "url": "https://data.4tu.nl/v2/collections/3dfc...2782/versions/1" 
  } 
]
```


#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 


















































#### 5\.1\.13  /v2/collections/\<collection\-id\>/versions/\<version\> (HTTP GET)


Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 















































Example usage: 

```
curl https://data.4tu.nl/v2/collections/3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782/versions/2 | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 













































Output of the example: 

```
{ /* Example output has been shortened. */ 
  "version": 2, 
  ... 
  "description": "<p>This collection contains the results of the work ...", 
  "categories": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "references": [], 
  "tags": [ ... ], 
  "authors": [ ... ], 
  "created_date": "2023-04-05T15:07:35", 
  "modified_date": "2023-05-26T15:19:11", 
  "id": 6070238, 
  "uuid": "3dfc4ef2-7f79-4d33-81a7-9c6ae09a2782", 
  "title": "Flared Folding Wingtips - TU Delft", 
  "doi": "10.4121/c.6070238.v2", 
  ... 
}
```


#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 












































#### 5\.1\.14  /v2/categories (HTTP GET)


Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 









































Each dataset and collection is categorized using a controlled vocabulary of categories. This API endpoint
provides those categories.
Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 







































Example usage: 

```
curl https://data.4tu.nl/v2/categories | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





































Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "id": 13622, 
    "uuid": "01fddd41-68d2-4e28-9d9c-18347847e7d1", 
    "title": "Mining and Extraction of Energy Resources", 
    "parent_id": 13620, 
    "parent_uuid": "6e5bdc69-96db-41e4-ac0b-18812b46c49c", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  { 
    "id": 13443, 
    "uuid": "026f555c-2826-4a83-97ff-0f230fb54ddb", 
    "title": "Livestock Raising", 
    "parent_id": 13440, 
    "parent_uuid": "45a8c849-ab59-4302-af79-09b8c0677df8", 
    "path": "", 
    "source_id": null, 
    "taxonomy_id": null 
  }, 
  ... 
]
```


#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 




































#### 5\.1\.15  /v2/licenses (HTTP GET)


Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

































Publishing a dataset involves communicating under which conditions it can be re\-used. The licenses under
which you can publish a dataset can be found with this API endpoint.
Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 































Example usage: 

```
curl https://data.4tu.nl/v2/licenses | jq
```

Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





























Output of the example: 

```
[ /* Example output has been shortened. */ 
  { 
    "value": 1, 
    "name": "CC BY 4.0", 
    "url": "https://creativecommons.org/licenses/by/4.0/", 
    "type": "data" 
  }, 
  { 
    "value": 10, 
    "name": "CC BY-NC 4.0", 
    "url": "https://creativecommons.org/licenses/by-nc/4.0/", 
    "type": "data" 
  }, 
  ... 
]
```


### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 




























### 5\.2  The /v2 private interface


The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

























The interaction with the v2 private interface API requires an API token. Such a token can be obtained from
the dashboard page after logging in. This token can then be passed along in the Authorization HTTP
header as: 

```
Authorization: token YOUR_TOKEN_HERE
```


#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 
























#### 5\.2\.1  /v2/account/articles (HTTP GET)


This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 





















This API endpoint lists the draft datasets of the account to which the authorization token
belongs.
The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 



















The following parameters can be used:
 

| Parameter | Required | Description |
| page | Optional | The page number used in combination with page\_size. |
| page\_size | Optional | The number of datasets per page. Used in combination with  page. |
| limit | Optional | The maximum number of datasets to output. Used together  with offset. |
| offset | Optional | The number of datasets to skip in the output. Used together  with limit. |
|  |

 
Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 

















Parameter 



Required 



Description 



page 



Optional 



The page number used in combination with page\_size. 



page\_size 



Optional 



The number of datasets per page. Used in combination with
 page. 



limit 



Optional 



The maximum number of datasets to output. Used together
 with offset. 



offset 



Optional 



The number of datasets to skip in the output. Used together
 with limit. 



Example usage: 

```
curl -H "Authorization: token YOUR_TOKEN_HERE" https://data.4tu.nl/v2/account/articles | jq
```

Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 















Output of the example: 

```
{ /* Example output has been shortened. */ 
  "id": null, 
  "uuid": "6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "title": "Example draft dataset", 
  "doi": null, 
  "handle": null, 
  "url": "https://data.4tu.nl/v2/articles/6ddd7a31-8ad8-4c20-95a3-e68fe716fa42", 
  "published_date": null, 
  ... 
}
```


#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 














#### 5\.2\.2  /v2/account/articles (HTTP POST)


This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 











This API endpoint can be used to create a new dataset.
The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 









The following parameters can be used:
 
 
 

| Parameter | Data type | Description |
| title | string | The title of the dataset. |
| description | string | A description of the dataset. |
| tags | list of strings | Keywords to enhance the findability of the dataset. Instead  of using the key tags, you may also use the key keywords. |
| references | list of strings | URLs to resources referring to this dataset, or resources  that this dataset refers to. |
| categories | list of strings | Categories are a controlled vocabulary and can be used to  make the dataset findable in the categorical overviews. The  string values expected here can be found under the uuid  property with a call to /v2/categories. For more details,  see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. |
| authors | list of author  records |  |
| defined\_type | string | One of: figure, online resource, preprint, book,  conference contribution, media,  dataset, poster, journal contribution, presentation,  thesis or software. |
| funding | string | One\-liner to cite funding. |
| funding\_list | list of funding  records |  |
| license | integer | Licences communicate under which conditions the dataset  can be re\-used. The integer value to submit here can be  found as the value property in a call to /v2/licences.  For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP  GET)](#x1-650005.1.15)’. |
| doi | string | Do not use this field as a DOI will be automatically assigned  upon publication.. |
| handle | string | Do not use this field as it is deprecated. |
| resource\_doi | string | The URL of the DOI of an associated peer\-reviewed journal  publication. |
| resource\_title | string | The title of the associated peer\-reviewed journal  publication. |
| publisher | string | The name of the data repository publishing the dataset. |
| custom\_fields | list of key\-value  pairs |  |
| timeline |  | Do not use this field because it will be automatically  populated during the publication process. |
|  |

 







Parameter 



Data type 



Description 



title 



string 



The title of the dataset. 



description 



string 



A description of the dataset. 



tags 



list of strings 



Keywords to enhance the findability of the dataset. Instead
 of using the key tags, you may also use the key keywords. 



references 



list of strings 



URLs to resources referring to this dataset, or resources
 that this dataset refers to. 



categories 



list of strings 



Categories are a controlled vocabulary and can be used to
 make the dataset findable in the categorical overviews. The
 string values expected here can be found under the uuid
 property with a call to /v2/categories. For more details,
 see section [5\.1\.14](#x1-640005.1.14) ‘[/v2/categories (HTTP GET)](#x1-640005.1.14)’. 



authors 



list of author
 records 



 



defined\_type 



string 



One of: figure, online resource, preprint, book,
 conference contribution, media,
 dataset, poster, journal contribution, presentation,
 thesis or software. 



funding 



string 



One\-liner to cite funding. 



funding\_list 



list of funding
 records 



 



license 



integer 



Licences communicate under which conditions the dataset
 can be re\-used. The integer value to submit here can be
 found as the value property in a call to /v2/licences.
 For more details, see section [5\.1\.15](#x1-650005.1.15) ‘[/v2/licenses (HTTP
 GET)](#x1-650005.1.15)’. 



doi 



string 



Do not use this field as a DOI will be automatically assigned
 upon publication.. 



handle 



string 



Do not use this field as it is deprecated. 



resource\_doi 



string 



The URL of the DOI of an associated peer\-reviewed journal
 publication. 



resource\_title 



string 



The title of the associated peer\-reviewed journal
 publication. 



publisher 



string 



The name of the data repository publishing the dataset. 



custom\_fields 



list of key\-value
 pairs 



 



timeline 



 



Do not use this field because it will be automatically
 populated during the publication process. 








References
----------




   Lassila, O. (1999, February). Resource description framework (RDF) model and syntax
 specification \[W3C Recommendation]. (http://www.w3\.org/TR/1999/REC\-rdf\-syntax\-19990222/)
 




   SPARQL 1\.1 overview \[W3C Recommendation]. (2013, March).
 (http://www.w3\.org/TR/2013/REC\-sparql11\-overview\-20130321/)









